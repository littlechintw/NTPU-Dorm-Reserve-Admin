"use strict";(self["webpackChunkntpu_dorm_check_in"]=self["webpackChunkntpu_dorm_check_in"]||[]).push([[32],{4032:function(e,t,s){s.r(t),s.d(t,{default:function(){return Z}});var a=s(3058),n=s(4437),i=s(6035),r=s(9359),o=s(8236),u=s(6275),l=s(5294),h=function(){var e=this,t=e._self._c;return t(a.Z,{attrs:{elevation:"0"}},[t(i.Z,{attrs:{fluid:""}},[t(l.Z,[t(n.Z,{attrs:{cols:"12"}},[t(l.Z,{attrs:{align:"center",justify:"center",length:""}},[t("br")]),t(l.Z,{directives:[{name:"show",rawName:"v-show",value:!e.loginStatus,expression:"!loginStatus"}],attrs:{align:"center",justify:"center",length:""}},[t("about")],1)],1)],1)],1),t(i.Z,{directives:[{name:"show",rawName:"v-show",value:e.isTrueAdmin,expression:"isTrueAdmin"}],attrs:{fluid:""}},[t("Announcement"),t(l.Z,{attrs:{align:"center",justify:"center",length:""}},[t("br")]),t(l.Z,{attrs:{align:"center",justify:"center",length:""}},[t("h1",[e._v("現在預約 / 報到狀態")])]),t(l.Z,{attrs:{align:"center",justify:"center",length:""}},[t("h3",{staticStyle:{color:"red"}},[e._v("資料讀取需要久一些")])]),t(l.Z,{attrs:{align:"center",justify:"center",length:""}},[t("div",[t("h2",[e._v("曉日")]),t(r.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.status.sun,"hide-default-footer":"","items-per-page":"100"}}),t("br"),t("h2",[e._v("皓月")]),t(r.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.status.moon,"hide-default-footer":"","items-per-page":"100"}}),t("br"),t("h2",[e._v("繁星")]),t(r.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.status.star,"hide-default-footer":"","items-per-page":"100"}}),t("br"),t("h2",[e._v("辰曦")]),t(r.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.status.morn,"hide-default-footer":"","items-per-page":"100"}})],1)]),t(l.Z,{attrs:{align:"center",justify:"center",length:""}},[t("br")])],1),e.initOverlay?t(o.Z,[t(u.Z,{attrs:{indeterminate:"",size:"64"}})],1):e._e()],1)},d=[],c=(s(7658),s(8630)),v=s(3950);const g=s(9669);var m=s(1181),f={name:"Home",data(){return{initOverlay:!0,window_height:100,window_width:100,overlay:!1,isAdmin:!1,isTrueAdmin:!1,downloadHref:"",status:{},headers:[{text:"預約時間",value:"event_name"},{text:"最大預約數",value:"maxReserve"},{text:"剩餘可預約數",value:"remainReserve"},{text:"目前預約數",value:"haveReserve"},{text:"報到人數",value:"checkin"}]}},components:{About:c.Z,Announcement:v.Z},methods:{verify_admin(){let e=this;e.initOverlay=!0,g({method:"post",url:m.apiurl+"/admin/verify",headers:{Authorization:e.$cookie.get("token")}}).then((function(t){e.initOverlay=!1,console.log(t.data),e.initOverlay=!1,200===t.data.code?(console.log("You can access!"),console.log(t.data),"admin"===t.data.message.rule&&(e.isTrueAdmin=!0),e.isAdmin=!0):console.log(t.data),403===t.data.code&&(alert("You bad bad :("),e.$router.push("/logout"))})).catch((function(t){403===t.response.status?e.$router.push("/logout"):alert(t)}))},get_reserve_status(){console.log("Status Check!");let e=this;e.initOverlay=!0,g({method:"get",url:m.apiurl+"/api/reserve_and_checkin_status",headers:{Authorization:e.$cookie.get("token")}}).then((function(t){200===t.status?(e.status=t.data.message,e.initOverlay=!1,console.log(e.status)):console.log(t.data),403===t.status&&(alert("You bad bad :("),e.$router.push("/logout"))})).catch((function(t){403===t.response.status?e.$router.push("/logout"):alert(t)}))},combineData(){}},mounted:function(){this.$cookie.get("token")?(this.loginStatus=!0,this.verify_admin(),this.get_reserve_status()):this.$router.push("/login"),this.window_height=window.innerHeight,this.window_width=window.innerWidth}},_=f,p=s(1001),w=(0,p.Z)(_,h,d,!1,null,"24e00894",null),Z=w.exports}}]);
//# sourceMappingURL=32.2f8cd628.js.map