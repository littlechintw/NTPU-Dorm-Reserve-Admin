"use strict";(self["webpackChunkntpu_dorm_check_in"]=self["webpackChunkntpu_dorm_check_in"]||[]).push([[859],{1859:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var a=s(3058),i=s(4437),n=s(6035),r=s(9359),o=s(8236),l=s(6275),u=s(5294),c=function(){var e=this,t=e._self._c;return t(a.Z,{attrs:{elevation:"0"}},[t(n.Z,{attrs:{fluid:""}},[t(u.Z,[t(i.Z,{attrs:{cols:"12"}},[t(u.Z,{attrs:{align:"center",justify:"center",length:""}},[t("br")]),t(u.Z,{directives:[{name:"show",rawName:"v-show",value:!e.loginStatus,expression:"!loginStatus"}],attrs:{align:"center",justify:"center",length:""}},[t("about")],1)],1)],1)],1),t(n.Z,{directives:[{name:"show",rawName:"v-show",value:e.isAdmin,expression:"isAdmin"}],attrs:{fluid:""}},[t("Announcement",{directives:[{name:"show",rawName:"v-show",value:e.isTrueAdmin,expression:"isTrueAdmin"}]}),t(u.Z,{attrs:{align:"center",justify:"center",length:""}},[t("br")]),t(u.Z,{attrs:{align:"center",justify:"center",length:""}},[t("h1",[e._v("現在預約 / 報到狀態")])]),t(u.Z,{attrs:{align:"center",justify:"center",length:""}},[t("h3",{staticStyle:{color:"red"}},[e._v("資料讀取需要久一些")])]),t(u.Z,{attrs:{align:"center",justify:"center",length:""}},[t("div",[t("h2",[e._v("曉日")]),t(r.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.status.sun,"hide-default-footer":"","items-per-page":"100"}}),t("br"),t("h2",[e._v("皓月")]),t(r.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.status.moon,"hide-default-footer":"","items-per-page":"100"}}),t("br"),t("h2",[e._v("繁星")]),t(r.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.status.star,"hide-default-footer":"","items-per-page":"100"}}),t("br"),t("h2",[e._v("辰曦")]),t(r.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.status.morn,"hide-default-footer":"","items-per-page":"100"}})],1)]),t(u.Z,{attrs:{align:"center",justify:"center",length:""}},[t("br")])],1),e.initOverlay?t(o.Z,[t(l.Z,{attrs:{indeterminate:"",size:"64"}})],1):e._e()],1)},h=[],d=(s(7658),s(8630)),v=s(4864);const m=s(9669);var g=s(1181),p={name:"Home",data(){return{initOverlay:!0,window_height:100,window_width:100,overlay:!1,isAdmin:!1,isTrueAdmin:!1,downloadHref:"",status:{},headers:[{text:"預約時間",value:"event_name"},{text:"最大預約數",value:"maxReserve"},{text:"剩餘可預約數",value:"remainReserve"},{text:"目前預約數",value:"haveReserve"},{text:"報到人數",value:"checkin"}]}},components:{About:d.Z,Announcement:v.Z},methods:{verify_admin(){let e=this;e.initOverlay=!0,m({method:"post",url:g.apiurl+"/admin/verify",headers:{Authorization:e.$cookie.get("token")}}).then((function(t){e.initOverlay=!1,console.log(t.data),e.initOverlay=!1,200===t.data.code?(console.log("You can access!"),console.log(t.data),"admin"===t.data.message.rule&&(e.isTrueAdmin=!0),e.isAdmin=!0):console.log(t.data),403===t.data.code&&(alert("You bad bad :("),e.$router.push("/logout"))})).catch((function(t){403===t.response.status?e.$router.push("/logout"):alert(t)}))},get_reserve_status(){console.log("Status Check!");let e=this;e.initOverlay=!0,m({method:"get",url:g.apiurl+"/api/reserve_and_checkin_status",headers:{Authorization:e.$cookie.get("token")}}).then((function(t){200===t.status?(e.status=t.data.message,e.initOverlay=!1,console.log(e.status)):console.log(t.data),403===t.status&&(alert("You bad bad :("),e.$router.push("/logout"))})).catch((function(t){403===t.response.status?e.$router.push("/logout"):alert(t)}))},combineData(){}},mounted:function(){this.$cookie.get("token")?(this.loginStatus=!0,this.verify_admin(),this.get_reserve_status()):this.$router.push("/login"),this.window_height=window.innerHeight,this.window_width=window.innerWidth}},f=p,y=s(1001),_=(0,y.Z)(f,c,h,!1,null,"ffc4ac98",null),w=_.exports},8236:function(e,t,s){s.d(t,{Z:function(){return o}});s(7658);var a=s(8914),i=s(3276),n=s(6470),r=s(4987),o=(0,r.Z)(a.Z,i.Z,n.Z).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim(){const e=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",e)},classes(){return{"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive,...this.themeClasses}},computedOpacity(){return Number(this.isActive?this.opacity:0)},styles(){return{zIndex:this.zIndex}}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render(e){const t=[this.__scrim];return this.isActive&&t.push(this.genContent()),e("div",{staticClass:"v-overlay",on:this.$listeners,class:this.classes,style:this.styles},t)}})}}]);
//# sourceMappingURL=859.51df7171.js.map